[//]: # (This file was autogenerated using `zio-sbt-website` plugin via `sbt generateReadme` command.)
[//]: # (So please do not edit it manually. Instead, change "docs/index.md" file or sbt setting keys)
[//]: # (e.g. "readmeDocumentation" and "readmeSupport".)

# ZIO Blocks

**Powerful, joyful building blocks for modern cloud-native applications.**

[![Development](https://img.shields.io/badge/Project%20Stage-Development-green.svg)](https://github.com/zio/zio/wiki/Project-Stages) ![CI Badge](https://github.com/zio/zio-blocks/workflows/CI/badge.svg) [![Sonatype Releases](https://img.shields.io/nexus/r/https/oss.sonatype.org/dev.zio/zio-blocks-schema_3.svg?label=Sonatype%20Release)](https://oss.sonatype.org/content/repositories/releases/dev/zio/zio-blocks-schema_3/) [![Sonatype Snapshots](https://img.shields.io/nexus/s/https/oss.sonatype.org/dev.zio/zio-blocks-schema_3.svg?label=Sonatype%20Snapshot)](https://oss.sonatype.org/content/repositories/snapshots/dev/zio/zio-blocks-schema_3/) [![javadoc](https://javadoc.io/badge2/dev.zio/zio-blocks-docs_3/javadoc.svg)](https://javadoc.io/doc/dev.zio/zio-blocks-docs_3) [![ZIO Blocks](https://img.shields.io/github/stars/zio/zio-blocks?style=social)](https://github.com/zio/zio-blocks)

## Overview

In today's distributed systems, you're constantly serializing, deserializing, validating, and transforming data across network boundaries. ZIO Blocks eliminates the boilerplate and gives you **one schema, infinite possibilities**. It provides powerful building blocks for modern cloud-native applications by making data handling in Scala as productive as dynamic languages, while maintaining all the benefits of static typing. It is derived from our experience developing ZIO Schema, but with a complete redesign to address its shortcomings.

## The Problem

Modern cloud-native development presents unique challenges:

1. Incoming: HTTP Request → Decode HTTP → Parse JSON → Deserialize → Data Model → Validate → Business Logic
2. Outgoing: Business Logic → Data Model → Serialize → Encode HTTP → HTTP Response

This repetitive data wrangling takes you away from actual business logic. In statically-typed languages, it's even worse when you have to maintain codec implementations for multiple data formats (JSON, Avro, Protobuf, etc.), performing repetitive serialization/deserialization and validation logic while losing generic programming capabilities.

Meanwhile, dynamic languages like JavaScript handle data effortlessly. For example, when you receive an HTTP response, you can directly parse JSON into a dynamic object:

```javascript
// In JavaScript:
const data = await res.json(); // Done!
```

## The Solution

ZIO Blocks brings dynamic-language productivity to statically-typed Scala:

```scala
case class Person(name: String, age: Int)

object Person {
  // One schema definition
  implicit val schema: Schema[Person] = Schema.derived
}

// Get everything for free:
val jsonCodec = JsonCodec.derived[Person]      // JSON serialization
val avroCodec = AvroCodec.derived[Person]      // Avro serialization
val protobuf = ProtobufCodec.derived[Person]   // Protobuf serialization
val validator = Validator.derived[Person]       // Validation
val diff = Diff.diff(person1, person2)         // Diffing/patching
val defaultValue = Default.default[Person]      // Default values
```

## Key Features

1. **Zero Dependencies**: No dependencies on the ZIO ecosystem, so we can use it anywhere, including with Akka, Typelevel, Kyo, or any Scala stack. So it is universal schema library for Scala.
2. **High Performance** ZIO Blocks uses register-based design inspired by CPU registers for to store primitives directly without boxing and unboxing, resulting in zero-allocation serialization/deserialization.
3. **Universal Data Formats** It provides serialization/deserialization for free in multiple formats:
   - **JSON** - Fast, type-safe JSON handling
   - **Avro** - Apache Avro binary format
   - **Protobuf** - Protocol Buffers
   - **Thrift** - Apache Thrift
   - **BSON** - MongoDB's binary JSON
   - **MessagePack** - Efficient binary serialization
4. **Reflective Optics** – These combine the practical power of traditional optics with embedded structural metadata, incorporating the actual structure of your data types within the optics themselves. This enables us to introspect and discover what type an optic is accessing and perform dynamic schema editing and customizations in a type-safe manner.
5. **Automatic Derivation** Easy type class derivation with just implementing a few methods then get automatic derivation for that type class for all types.

## Installation

Add to your `build.sbt`:

```scala
libraryDependencies += "dev.zio" %% "zio-blocks-schema" % "0.0.1"
```

Now you have access to the core ZIO Blocks schema library. You can also add additional modules for specific formats.

## Quick Start

### Basic Schema Definition

Assume we have the following data models:

```scala
case class Address(street: String, city: String)
case class Person(name: String, age: Int, address: Address)
```

We can define schemas for them as follows:

```scala
object Person extends CompanionOptics[Person] {
  implicit val schema: Schema[Person] = Schema.derived
}
```

Now with this schema, we derive codecs, validators, optics, and more for free!

For example, here is en example of defining a `Lens` optic:

```scala
object Person extends CompanionOptics[Person] {
 implicit val schema: Schema[Person] = Schema.derived

  val name: Lens[Person, String] = $(_.name)
  val age: Lens[Person, Int] = $(_.age)
  val streetName: Lens[Person, String] = $(_.address.street)
}
```

Then we can do data access and modification like this:

```scala
val person = Person("John", 25, Address("123 Main St", "Exampleville"))

// Use for access/modification
val updated = Person.age.replace(person, 42)

println(s"Original age: ${person.age}, Updated age: ${updated.age}")
```

## Documentation

Learn more on the [ZIO Blocks homepage](https://zio.dev)!

## Contributing

For the general guidelines, see ZIO [contributor's guide](https://zio.dev/contributor-guidelines).

## Code of Conduct

See the [Code of Conduct](https://zio.dev/code-of-conduct)

## Support

Come chat with us on [![Badge-Discord]][Link-Discord].

[Badge-Discord]: https://img.shields.io/discord/629491597070827530?logo=discord "chat on discord"
[Link-Discord]: https://discord.gg/2ccFBr4 "Discord"

## License

[License](LICENSE)
